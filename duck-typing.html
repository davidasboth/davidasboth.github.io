<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags always come first -->
	<meta charset="utf-8">

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-FMY957X39V"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-FMY957X39V');
	</script>



	<!-- Start cookieyes banner -->
    <script id="cookieyes" type="text/javascript" src="https://cdn-cookieyes.com/client_data/2808e7a66d4c9b126f5d2ac9/script.js"></script>
    <!-- End cookieyes banner --> 

	<!-- Favicon stuff -->
	<link rel="apple-touch-icon" sizes="180x180" href="/theme/images/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/theme/images/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/theme/images/favicon-16x16.png">
	<link rel="manifest" href="/theme/images/site.webmanifest">

	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>David Asboth - Data Solutions &amp; Consultancy</title>

	<link rel="canonical" href="/duck-typing.html">
	
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap" rel="stylesheet"> 
	
	<link rel="stylesheet" href="/theme/css/style.css">
	<link rel="stylesheet" href="/theme/css/pygments.css">


</head>

<body>
	<header id="stickyHeader">
		<div class="container">
			<a href="/"><img src="/theme/images/da-logo.svg" alt="David Asboth logo" id="header-logo"/></a>
			<nav>
				<ul>
					<li>
						<a href="/#solutions">Solutions</a>
					</li>
					<li>
							<a href="/#about">About</a>
					</li>
					<li>
							<a href="/articles">Articles</a>
					</li>
					<li>
					  <a href="#contact" class="button button-filled">Contact</a>
					</li>
				</ul>
			</nav>
		</div>
	</header>


<main id="articles-tutorials">
    <section id="splash">
        <div class="container">
            <h1 class="text-centered">Duck Typing</h1>
            <div class="text-centered padding-medium"><a class="tag" href="category/programming-for-data-scientists.html">programming for data scientists</a></div>
            <p class="text-centered"><p>My first attempt to bridge the gap between the two disciplines of programming and data science, by talking about programming concepts useful for data scientists, and vice versa. Today: duck typing.</p></p>
         </div>
    </section>

    <section id="article-content">
        <div class="container">
            
            <p>In an attempt to bridge the gap between the two disciplines of
programming and data science I will occasionally talk about programming
concepts useful for data scientists, and vice versa.</p>
<p>Today I want to discuss <strong>duck typing</strong>.</p>
<p>Duck typing is a concept that originated in the Python community. It is
a way of checking an object's type not by testing its type directly, but
testing its <strong>methods</strong>.</p>
<p>The idea is based on something called <a href="https://en.wikipedia.org/wiki/Duck_test">the duck test</a>. You've probably heard it
before:</p>
<blockquote>
<p>"If it looks like a duck, swims like a duck, and quacks like a duck,
then it probably is a duck."</p>
</blockquote>
<p>How does this relate to programming?</p>
<p>Well, Python is a dynamically-typed language. That means that the types
of objects (whether they're integers, strings etc.) is checked at
<strong>runtime, not compile time</strong>.</p>
<p>A variable is allowed to have different types at different points of a
program's execution. This is perfectly valid:</p>
<div class="codehilite"><pre><span></span><code><span class="n">my_variable</span> <span class="o">=</span> <span class="mi">42</span>
<span class="c1"># do stuff with my_variable...</span>
<span class="c1"># and later...</span>
<span class="n">my_variable</span> <span class="o">=</span> <span class="s2">&quot;now it&#39;s a string!&quot;</span>
</code></pre></div>

<p>You can't do this in a statically-typed language. Once you declare a
variable as a certain type, it stays that way. Take this example in C#:</p>
<div class="codehilite"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">my_variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">42</span><span class="p">;</span><span class="w"> </span><span class="c1">// explicitly declare an integer</span>
<span class="c1">// do stuff</span>
<span class="n">my_variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;can I be a string?&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// this will produce a compiler error</span>
</code></pre></div>

<p><em>Actually there are <a href="https://msdn.microsoft.com/en-us/library/dd264736.aspx">dynamic types in C#</a> but we'll just gloss over that.</em></p>
<p>The point is you can be quite liberal with types in Python.</p>
<p>You can take this one step further with duck typing.</p>
<h2>Duck Typing in Python</h2>
<p>Say you have a function that makes a duck quack, like this:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">make_it_quack</span><span class="p">(</span><span class="n">something_duck_like</span><span class="p">):</span>
    <span class="n">something_duck_like</span><span class="o">.</span><span class="n">quack</span><span class="p">()</span>
</code></pre></div>

<p>We've taken an object in and called its quack method. We don't care what
type of object this is, only that it is able to quack. So if we had a
"real" duck and an impostor, they'd both work with this method:</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Duck</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">quack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Quack quack&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Ferret</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># ferrets can&#39;t normally quack, but this one&#39;s cunning</span>
    <span class="k">def</span> <span class="nf">quack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Quack quack&quot;</span><span class="p">)</span>

<span class="n">donald</span> <span class="o">=</span> <span class="n">Duck</span><span class="p">()</span>
<span class="n">fred</span> <span class="o">=</span> <span class="n">Ferret</span><span class="p">()</span>

<span class="n">make_it_quack</span><span class="p">(</span><span class="n">donald</span><span class="p">)</span>
<span class="n">make_it_quack</span><span class="p">(</span><span class="n">fred</span><span class="p">)</span>
</code></pre></div>

<p>Both of these will produce the output "Quack quack" because all we did
was make it quack. If it can do that, then as far as we're concerned
it's a duck.</p>
<h2>Duck Typing in Data Science</h2>
<p>This is a concept that can be quite useful in data science.</p>
<p>For example, imagine that you have your own implementation of a machine
learning algorithm but want to use a lot of the goodness built in to
scikit-learn.</p>
<p>Well, you know how all scikit-learn implementations have a fit and
predict function?</p>
<p>You can create your own object and make use of duck typing by "quacking
like a scikit-learn duck".</p>
<p>First, create a class that has fit and predict methods:</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MyFakeClassifier</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Working VERY HARD...&quot;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="c1"># predict 0 no matter what</span>
        <span class="k">return</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))]</span>
</code></pre></div>

<p>Now you can fit and predict the same way as you could with, say, a
Random Forest.</p>
<p>Imagine you already wrote a small function that takes in a machine
learning classifier, does a train-test split and gets the accuracy and
confusion matrix of the predictions.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_iris</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">confusion_matrix</span>

<span class="c1"># write a function to give us a train-test accuracy score</span>
<span class="k">def</span> <span class="nf">get_accuracy</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">stratify</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Accuracy: </span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
                                    <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)))</span>
</code></pre></div>

<p>We can use this for a built-in classifier, but also our new estimator:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_iris</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>

<span class="n">iris</span> <span class="o">=</span> <span class="n">load_iris</span><span class="p">()</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">data</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span>

<span class="n">rf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">()</span>
<span class="n">random_model</span> <span class="o">=</span> <span class="n">MyFakeClassifier</span><span class="p">()</span>

<span class="c1"># we can get the accuracy of our Random Forest</span>
<span class="n">get_accuracy</span><span class="p">(</span><span class="n">rf</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="c1"># and our new model!</span>
<span class="n">get_accuracy</span><span class="p">(</span><span class="n">random_model</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</code></pre></div>

<p>There you have it. All we had to do was create something that can "fit"
and "predict" and Python doesn't need anything else for it to work.</p>
<p>Note: to use the full range of scikit-learn functions with your own
estimator, you should <a href="http://scikit-learn.org/stable/developers/contributing.html#rolling-your-own-estimator">do it properly</a>,
but the point is you can do a lot of it by duck typing.</p>
<p>Here's <a href="https://github.com/davidasboth/blog-notebooks/blob/master/duck-typing/Duck%20Typing.ipynb">the associated notebook</a>.</p>
<p>Happy quacking!</p><script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

        </div>
    </section>

<section id="about">
    <div class="container flex-container">
      <div class="col-40 image-full">
            <img src="/theme/images/David-Asboth-profile-image-square.jpg">
        </div>
      <div class="col-60">
        <h2>About David</h2>
        <p>I'm a freelance data scientist, consultant, and educator with an MSc. in Data Science and a background in software and web development. I'm a generalist; my previous roles have been a range of data science, software development, and software architecting jobs.</p>
        <p class="text-pre-heading">Things I also do:</p>
        <ul>
          <li>
            I co-host the <a href="https://halfstackdatascience.com">Half Stack Data Science podcast</a> where we talk about the realities of data science in the business world
            </li>
          <li>
            I've written various <a href="/articles">articles and tutorials</a> about data science
          </li>
          <li>
            I've given a selection of talks at large conferences and universities, all on similar topics of "real world data science"
            </li>
          <li>
            I occasionally stream some data science over on <a href="https://www.twitch.tv/jazzsloth">Twitch</a>, where I take a vague project idea, a dataset, and try to come up with an answer in about an hour, explaining the code and thought process as I go.
            </li>
          </ul>
        </div>
      </div>
    </section>
<section id="contact">
<div class="container flex-container">
  <div class="col-40 image-full">
	<img src="/theme/images/DataScienceFestival-02-contact.jpg">
	</div>
  <div class="col-60">
	<h2>Contact me</h2>
	<p>Please give me a brief idea of what you're looking for help with, and I'll get back to you very soon. If you're having trouble with the form below, you can also email me at <a href="mailto:hello@davidasboth.com" target="_blank">hello@davidasboth.com</a></p>
	<form action="https://api.formcake.com/api/form/184308c0-d548-4a26-ae33-db870931e16d/submission" method="POST">
	  <input type="text" name="name" placeholder="Name *" required>
	  <input type="email" name="email" placeholder="Email address *" required>
	  <select name="service-required" required>
		<option value="" disabled selected hidden>What are you looking for help with?</option>
		<option value="consulting-largeorg" >Consulting for a large organisation</option>
		<option value="consulting-smallbiz" >Consulting for a small business/startup</option>
		<option value="education-staff" >Education for staff members</option>
		<option value="mentoring-1to1" >Mentoring 1:1s for students/career newbies</option>
		 <option value="other" >Other</option>
		</select>
	  <textarea placeholder="Message *" name="message" required></textarea>
	  <input type="text" name="spiderweb" style="display: none">
		  <input type="submit" class="button button-filled" value="Get in touch!">
		  <a class="icon" href="https://twitter.com/davidasboth"><img src="/theme/images/icon-twitter.svg" alt="Twitter"/></a>
		  <a class="icon" href="https://www.linkedin.com/in/david-asboth-9256772b"><img src="/theme/images/icon-linkedin.svg" alt="LinkedIn"/></a>
	  </form>
	</div>
  </div>
</section></main>


	<footer>
		<div class="container flex-container">
			<p>© 2023 David Asboth. Site designed with love by <a href="http://design.barbasboth.com/">Barbara Asboth</a>. All Rights Reserved.</p>
			<p>hello@davidasboth.com</p>
		</div>
	</footer>
	<script>
	// Add the sticky class to the header when you reach its scroll position. Remove "sticky" when you leave the scroll position
		
	var header = document.getElementById("stickyHeader");

	// Get the offset position of the navbar
	var sticky = header.offsetTop + '180';
	function toggleStickyHeader() {
	  if (window.pageYOffset > sticky) {
		header.classList.add("sticky");
	  } else {
		header.classList.remove("sticky");
	  }
	}
	window.onscroll = function() {toggleStickyHeader()};
	</script>
</body>

</html>