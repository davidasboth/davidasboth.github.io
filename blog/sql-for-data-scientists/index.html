<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>SQL For Data Scientists | David Asboth | Data Science
</title>
  <link rel="canonical" href="/blog/sql-for-data-scientists/index.html">

  <link rel="alternate" type="application/atom+xml" href="/feeds/all.atom.xml" title="Full Atom Feed">
  <link rel="alternate" type="application/atom+xml" href="/feeds/category.slug.atom.xml" title="Categories Atom Feed">


  <link rel="stylesheet" href="/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="/theme/css/style.css">


<meta name="description" content="From what I can tell, the biggest difference between data science curricula and data science job postings is usually knowledge of SQL. I assume most businesses want a data scientist who knows SQL because a lot of corporate data is stored in some sort of relational database. For some reason â€¦">
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1 class="title"><a href="/">David Asboth | Data Science</a></h1>
        </div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>SQL For Data Scientists
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
<!--
      <li class="list-inline-item text-muted" title="2016-11-26T20:08:00+00:00">
        <i class="fa fa-clock-o"></i>
        Sat 26 November 2016
      </li>
-->
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="/category/programming-for-data-scientists.html">programming for data scientists</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-files-o"></i>
        <a href="/tag/featured.html">#featured</a>      </li>
    </ul>
  </header>
  <div class="content">
    <p>From what I can tell, the biggest difference between data science
curricula and data science job postings is usually knowledge of SQL. I
assume most businesses want a data scientist who knows SQL because a lot
of corporate data is stored in some sort of relational database. For
some reason though, data science courses don't tend to teach it
explicitly.</p>
<p>I wanted to collect some of the concepts which I think are useful for
aspiring data scientists to learn about databases and SQL. I'll also
link to appropriate parts of the <a href="http://www.w3schools.com/sql/">w3schools SQL tutorials</a> along the way.</p>
<h1>Query Syntax</h1>
<p>Obviously the first step is to understand how to write a SQL query.</p>
<p>SQL is a <a href="https://en.wikipedia.org/wiki/Declarative_programming">declarative language</a>. All
that means is that when you write a SQL query, you're expressing <strong>what the result should look like, rather than how to achieve it</strong>.</p>
<p>Let's look at a basic SQL query and see how that's the case.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">height</span> <span class="k">FROM</span> <span class="n">people</span> <span class="k">WHERE</span> <span class="n">job</span> <span class="o">=</span> <span class="ss">&quot;data scientist&quot;</span>
</code></pre></div>

<p>SQL is not case sensitive, but I capitalised the keywords (which is a
typical thing to do anyway).</p>
<p>If you know that you have a table of data, called <strong>people</strong>, you can
pretty much work out what this query will do. The declarative syntax
means you can specify the data source (the people table), what you want
to extract (name, age and height) and any filters you want to apply
(only get the data for people who are data scientists).</p>
<p>There is a lot going on under the hood in terms of the computer deciding
how best to store and index the data, but when you write queries you
don't want to have to care about that, you just want your results.</p>
<p>The main keywords you need to know are:</p>
<ul>
<li><a href="http://www.w3schools.com/sql/sql_select.asp">SELECT...FROM</a> (to select rows from a specific table)</li>
<li><a href="http://www.w3schools.com/sql/sql_where.asp">WHERE</a> (to filter
    rows - <em>optional</em>)</li>
<li><a href="http://www.w3schools.com/sql/sql_insert.asp">INSERT</a> (to insert new
    rows)</li>
<li><a href="http://www.w3schools.com/sql/sql_update.asp">UPDATE</a> (to update
    existing rows)</li>
<li><a href="http://www.w3schools.com/sql/sql_delete.asp">DELETE</a> (to remove
    rows)</li>
<li><a href="http://www.w3schools.com/sql/sql_groupby.asp">GROUP BY</a> (to group
    data into... well, groups)</li>
<li><a href="http://www.w3schools.com/sql/sql_create_table.asp">CREATE TABLE</a>
    (to create new tables)</li>
<li><a href="http://www.w3schools.com/sql/sql_alter.asp">ALTER TABLE</a> (to make
    changes to tables like adding new columns)</li>
<li><a href="http://www.w3schools.com/sql/sql_join.asp">JOIN</a> (to join multiple
    tables together)</li>
</ul>
<h1>The JOIN keyword</h1>
<p>I left the JOIN keyword until last in that list because it warrants its
own section.</p>
<p>Merging multiple data sources is a staple data science operation, and
that's no different when working with SQL. If you've used the merge
function in pandas you'll have seen this already, but let's see how they
compare.</p>
<p>Let's take the example of joining two data sources with pandas. One of
them is a csv of people, with names, ages, heights and jobs. The other
is a csv of phone numbers linked to people's names. The name column is
common between both data sources.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;people.csv&quot;</span><span class="p">)</span>
<span class="n">phone_numbers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;phone_numbers.csv&quot;</span><span class="p">)</span>

<span class="n">merged</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">phone_numbers</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>
</code></pre></div>

<p>That <em>how</em> keyword corresponds to the type of join in SQL. The same
operation in SQL looks like this (assuming we have a people and
phone_numbers table in a database, rather than csv files):</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
  <span class="n">people</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">people</span><span class="p">.</span><span class="n">age</span><span class="p">,</span> <span class="n">people</span><span class="p">.</span><span class="n">height</span><span class="p">,</span> <span class="n">phone_numbers</span><span class="p">.</span><span class="nb">number</span>
<span class="k">FROM</span>
  <span class="n">people</span>
  <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">phone_numbers</span> <span class="k">ON</span> <span class="n">people</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">phone_numbers</span><span class="p">.</span><span class="n">name</span>
</code></pre></div>

<p>I've specifically stated in the SELECT clause where the columns come
from, because both tables have a name column and SQL would have gotten
confused otherwise.</p>
<p>The types of SQL join correspond to the valid values of the "how"
keyword in the pandas merge function. They are:</p>
<ul>
<li><a href="http://www.w3schools.com/sql/sql_join_inner.asp">Inner Join</a> - only
    rows where both tables have a value are returned</li>
<li><a href="http://www.w3schools.com/sql/sql_join_left.asp">Left Outer Join</a> -
    only rows where the table on the left of the statement has a value
    are returned</li>
<li><a href="http://www.w3schools.com/sql/sql_join_right.asp">Right Outer Join</a> - only rows
    where the table on the right of the statement has a value are
    returned</li>
<li><a href="http://www.w3schools.com/sql/sql_join_full.asp">Full Outer Join</a> -
    all rows are returned from both tables</li>
</ul>
<p>The outer joins let you keep rows from either table if there are no
corresponding rows in the other table.</p>
<p>So a left join in the previous statements would have shown all people,
regardless of whether they had a phone number in the second data source.
The rows of people who don't have a phone number would have shown a NULL
value for the phone number. Using an inner join wouldn't have returned
them at all.</p>
<p>It can be helpful to view this visually, and the w3schools pages do that
already, but <a href="https://blog.codinghorror.com/a-visual-explanation-of-sql-joins/">here's another good example</a>.</p>
<h1>SQL Tools for Data Science</h1>
<p>If you know the basic query syntax and the various join types, you're
probably equipped enough to start pulling data out of any SQL database.
Programmers working with SQL often use specific tools to access
databases, such as Microsoft's SQL Server Management Studio.</p>
<p>However, as a data scientist you'll want to do this straight from your
code instead. You have a few options for this.</p>
<ul>
<li>You can <a href="http://www.datacarpentry.org/python-ecology-lesson/08-working-with-sql">connect to sqlite</a></li>
<li>You can use SQL queries in pandas <a href="http://blog.yhat.com/posts/pandasql-sql-for-pandas-dataframes.html">using pandasql</a></li>
<li>pandas also allows <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_sql.html">connecting to SQL sources</a></li>
</ul>
<p>Also, if you're familiar with pandas but not with SQL, the pandas
documentation has a section with <a href="http://pandas.pydata.org/pandas-docs/stable/comparison_with_sql.html">pandas commands and the associated SQL queries</a>.</p>
<h1>Conclusion</h1>
<p>I'd argue that's all you need to get up and running.</p>
<p>W3schools is a great interactive resource to test your sql queries, but
there are plenty of other good learning resources like
<a href="https://www.codecademy.com/learn/learn-sql">Codecademy</a>.</p>
<p>There is more to know of course about relational databases. I haven't
covered the concepts of primary keys, foreign keys, or indexes because
these are more important for database design rather than data retrieval.
Designing a relational database has its own set of skills and required
knowledge, but if your only interaction is retrieving data, you
shouldn't have to worry about it.</p>
<p>I may write a post about database design in the future, but I'd strongly
argue that it's an optional skill for most data scientists.</p>
<p>Footnote: This is the 26<sup>th</sup> entry in my <a href="/blog/30-posts-in-30-days/">30 day blog challenge</a>.</p><script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
       <div class="col-sm-6"></div>
       <p class="col-sm-6 text-sm-right text-muted">
          Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a> / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
       </p>
      </div>
    </div>
  </footer>
</body>

</html>